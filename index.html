<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Стеганографія</title>
    <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js"
            type="application/javascript"></script>
</head>
<body>
<script>
    provider = new ethers.providers.InfuraProvider('rinkeby', {
        projectId: 'eea7936a594447ac814a6e6d96e98fc1',
        // projectSecret: 'f0a0f344794d44da9156d24af396d46d'
    });

    wallet = new ethers.Wallet('52296d0ada7943a3e529442e58c178a4e1b35b828f059a31d81a33f351a78cd8', provider)

    wallet.getBalance().then(
        success => {
            console.log(ethers.utils.formatUnits(success))
        },
        error => {
            console.error(error)
        })

    contract = new ethers.Contract('0xC4B20d2555be52eDf5F32806d7328479edECB584',
        '[{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"read","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"text","type":"string"}],"name":"send","outputs":[],"stateMutability":"nonpayable","type":"function"}]',
        provider);
    contractWithSigner = contract.connect(wallet);


    function sendText(id, text) {
        if (!id) {
            const id = Math.floor(Math.random() * 99999999)
        }
        contractWithSigner.send(id, text).then(
            success => {
                console.log(success)
            },
            error => {
                console.error(error)
            })
    }

    function readText(id) {
        contractWithSigner.read(id).then(
            success => {
                console.log(success)
            },
            error => {
                console.error(error)
            })
    }

    // sendText('Test 1')
    readText(75523968)
</script>


<h1>
    <h1>Отримати повідомлення</h1>
    <p>Вставьте сюди текст який містить стеганографічне послання і натиснить кнопку "Розшифрувати"</p>
    <textarea id="encrypt"></textarea>
    <button>Розшифрувати</button>
    <textarea id="decrypt"></textarea>



    <a href="https://docs.google.com/document/d/1PeOvcXvNsrsfINYnZOZniUGKNTt0ufcjiAsbbUWcPao/edit?usp=sharing">Як це
        працює</a>
</h1>
</body>
</html>
